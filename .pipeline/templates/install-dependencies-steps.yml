steps:
  - task: Cache@2
    inputs:
      key: 'python | "$(Agent.OS)" | Pipfile | $(cacheKeyVersion)'
      restoreKeys: | 
        python | "$(Agent.OS)"
        python
      path: $(PIP_CACHE_DIR)
    displayName: Cache Python packages
  - script: pip install --upgrade pipenv
    displayName: 'Install pipenv'
  - script: python -m pipenv install
    displayName: 'Install Python dependencies'
  - script: |
      curl -sSfo op.zip \
        https://cache.agilebits.com/dist/1P/op2/pkg/v2.6.0/op_linux_amd64_v2.6.0.zip \
        && unzip -od /usr/local/bin/ op.zip \
        && rm op.zip
    displayName: "Install 1Password"
